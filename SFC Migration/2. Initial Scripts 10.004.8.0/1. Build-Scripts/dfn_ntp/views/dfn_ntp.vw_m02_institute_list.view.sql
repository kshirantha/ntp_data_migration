CREATE OR REPLACE FORCE VIEW dfn_ntp.vw_m02_institute_list
(
	m02_id,
	m02_address,
	m02_code,
	m02_email,
	m02_fax,
	m02_name,
	m02_name_lang,
	m02_telephone,
	m02_off_mrkt_orders_allowed,
	m02_add_rcvbl_for_bp,
	m02_use_exg_com_discount,
	m02_primary_contact,
	m02_branch_status,
	m02_created_by_id_u17,
	created_by_full_name,
	m02_created_date,
	m02_approved_by_id_u17,
	m02_approved_date,
	m02_account_activation_period,
	m02_account_suspension_period,
	m02_account_deletion_period,
	m02_maker_checker_status,
	m02_is_local,
	m02_price_block_type_id_m55,
	m02_price_block_perc,
	m02_password_history_count,
	m02_minimum_password_length,
	m02_pwd_complexity_lvl_id_m96,
	m02_password_expiry_period,
	m02_overdraw,
	m02_print_price_login_in_pin,
	m02_pwd_expiry_warning_days,
	m02_exchange_book_keepers_enab,
	m02_broker_code,
	m02_pwd_lowercase_required,
	m02_pwd_uppercase_required,
	m02_pwd_numbers_required,
	m02_pwd_specialchars_required,
	m02_gen_use_pwd_comp_lvl_users,
	m02_gen_use_pwd_comp_lvl_cust,
	m02_cus_pwd_complex_lvl_id_m96,
	m02_cus_minimum_pwd_length,
	m02_cus_pwd_lowercase_required,
	m02_cus_pwd_uppercase_required,
	m02_cus_pwd_numbers_required,
	m02_cus_pwd_specials_required,
	m02_cus_pwd_expiry_period,
	m02_cus_pwd_expiry_warningdays,
	m02_cus_acct_activation_period,
	m02_cus_acct_suspension_period,
	m02_cus_acct_deletion_period,
	m02_cus_pwd_history_count,
	m02_is_root_institution,
	m02_website_url,
	m02_product_name,
	m02_product_name_arb,
	m02_address_lang,
	m02_define_com_grp_for_sub_ac,
	m02_display_currency_code_m03,
	m02_display_currency_id_m03,
	m02_bypass_buying_power,
	m02_max_margin,
	m02_margin_blocked,
	m02_margin_utilized,
	m02_max_day_limit,
	m02_day_limit_blocked,
	m02_day_limit_utilized,
	m02_currency_code_m03,
	m02_change_pwd_on_fir_log,
	m02_mubasher_exec_id,
	m02_swift_enabled,
	m02_allow_small_orders,
	m02_deposit_sms_allow,
	m02_login_url,
	m02_allow_multiple_id_types,
	m02_overdrawn_interest_rate,
	m02_bp_buypass_manual_order,
	m02_validate_price_sub_channel,
	m02_enable_cust_rebate_calc,
	m02_max_backsearch_months,
	m02_trade_settle_curr_restric,
	m02_cash_transation_disable,
	m02_enable_sharia_compliant,
	m02_validate_exp_date_min_diff,
	m02_issue_exp_min_days_diff,
	m02_send_cma_deta_updat_remind,
	m02_cma_details_remind_days,
	m02_send_primry_id_exp_remind,
	m02_primry_id_exp_remind_days,
	m02_modified_by_id_u17,
	modified_by_full_name,
	m02_modified_date,
	m02_hotline,
	m02_agreement_check_date,
	m02_is_check_agreement,
	m02_trans_approve_disable,
	m02_min_req_coverage_ratio,
	m02_group_bp_enable,
	m02_daily_withdrawal_limit,
	m02_daily_withd_lmt_cur_cd_m03,
	m02_daily_withd_lmt_cur_id_m03,
	m02_status_id_v01,
	status_description,
	status_description_lang,
	m02_status_changed_by_id_u17,
	status_changed_by_full_name,
	m02_status_changed_date,
	m02_pwd_max_same_adj_chars,
	m02_cust_pwd_max_same_adj_chrs,
	m02_pwd_not_contain_login_name,
	m02_cust_pwd_not_contain_lgn_n,
	m02_cust_login_trading_pwd_dif,
	m02_pwd_max_repeated_chars,
	m02_cust_pwd_max_repeated_char,
	m02_pwd_start_should_char,
	m02_cust_pwd_start_should_char,
	m02_maximum_password_length,
	m02_cust_maximum_pwd_length,
	m02_stmt_purge_period,
	m02_primary_security_acc,
	m02_secondary_security_acc,
	m02_display_minus_buying_power,
	m02_sec_comm_grp_allowed,
	m02_enable_cash_due_cleared,
	m02_due_settle_enabled,
	m02_enable_hold_due_cleared,
	m02_enable_pend_stl_utilize,
	m02_display_unique_order,
	m02_disable_portf_self_trade,
	m02_disclaimer,
	m02_disclaimer_ar,
	m02_cust_detail_in_tmptbl_days,
	m02_max_intl_backsearch_months,
	m02_toll_free_number,
	m02_apply_min_discount,
	m02_report_logo_path,
	m02_underage_to_minor_years,
	m02_minor_to_major_years,
	m02_vat_no,
	m02_primary_institute_id_m02,
	is_root_institution,
	m02_kyc_renewal_individual,
	m02_kyc_renewal_corporate,
	m150_primary_institute_id_m02,
	m150_description,
	m150_code,
	m02_broker_id_m150,
	m02_default_product_id_m152,
	m02_price_type_for_margin,
	m02_add_buy_pending_for_margin,
	m02_add_pledge_for_bp
)
AS
	SELECT a.m02_id,
		   a.m02_address,
		   a.m02_code,
		   a.m02_email,
		   a.m02_fax,
		   a.m02_name,
		   a.m02_name_lang,
		   a.m02_telephone,
		   a.m02_off_mrkt_orders_allowed,
		   a.m02_add_rcvbl_for_bp,
		   a.m02_use_exg_com_discount,
		   a.m02_primary_contact,
		   a.m02_branch_status,
		   a.m02_created_by_id_u17,
		   u17_created_by.u17_full_name
			   AS created_by_full_name,
		   a.m02_created_date,
		   a.m02_approved_by_id_u17,
		   a.m02_approved_date,
		   a.m02_account_activation_period,
		   a.m02_account_suspension_period,
		   a.m02_account_deletion_period,
		   a.m02_maker_checker_status,
		   a.m02_is_local,
		   a.m02_price_block_type_id_m55,
		   a.m02_price_block_perc,
		   a.m02_password_history_count,
		   a.m02_minimum_password_length,
		   a.m02_pwd_complexity_lvl_id_m96,
		   a.m02_password_expiry_period,
		   a.m02_overdraw,
		   a.m02_print_price_login_in_pin,
		   a.m02_pwd_expiry_warning_days,
		   a.m02_exchange_book_keepers_enab,
		   a.m02_broker_code,
		   a.m02_pwd_lowercase_required,
		   a.m02_pwd_uppercase_required,
		   a.m02_pwd_numbers_required,
		   a.m02_pwd_specialchars_required,
		   a.m02_gen_use_pwd_comp_lvl_users,
		   a.m02_gen_use_pwd_comp_lvl_cust,
		   a.m02_cus_pwd_complex_lvl_id_m96,
		   a.m02_cus_minimum_pwd_length,
		   a.m02_cus_pwd_lowercase_required,
		   a.m02_cus_pwd_uppercase_required,
		   a.m02_cus_pwd_numbers_required,
		   a.m02_cus_pwd_specials_required,
		   a.m02_cus_pwd_expiry_period,
		   a.m02_cus_pwd_expiry_warningdays,
		   a.m02_cus_acct_activation_period,
		   a.m02_cus_acct_suspension_period,
		   a.m02_cus_acct_deletion_period,
		   a.m02_cus_pwd_history_count,
		   a.m02_is_root_institution,
		   a.m02_website_url,
		   a.m02_product_name,
		   a.m02_product_name_arb,
		   a.m02_address_lang,
		   a.m02_define_com_grp_for_sub_ac,
		   a.m02_display_currency_code_m03,
		   a.m02_display_currency_id_m03,
		   a.m02_bypass_buying_power,
		   a.m02_max_margin,
		   a.m02_margin_blocked,
		   a.m02_margin_utilized,
		   a.m02_max_day_limit,
		   a.m02_day_limit_blocked,
		   a.m02_day_limit_utilized,
		   a.m02_currency_code_m03,
		   a.m02_change_pwd_on_fir_log,
		   a.m02_mubasher_exec_id,
		   a.m02_swift_enabled,
		   a.m02_allow_small_orders,
		   a.m02_deposit_sms_allow,
		   a.m02_login_url,
		   a.m02_allow_multiple_id_types,
		   a.m02_overdrawn_interest_rate,
		   a.m02_bp_buypass_manual_order,
		   a.m02_validate_price_sub_channel,
		   a.m02_enable_cust_rebate_calc,
		   a.m02_max_backsearch_months,
		   a.m02_trade_settle_curr_restric,
		   a.m02_cash_transation_disable,
		   a.m02_enable_sharia_compliant,
		   a.m02_validate_exp_date_min_diff,
		   a.m02_issue_exp_min_days_diff,
		   a.m02_send_cma_deta_updat_remind,
		   a.m02_cma_details_remind_days,
		   a.m02_send_primry_id_exp_remind,
		   a.m02_primry_id_exp_remind_days,
		   a.m02_modified_by_id_u17,
		   u17_modified_by.u17_full_name
			   AS modified_by_full_name,
		   a.m02_modified_date,
		   a.m02_hotline,
		   a.m02_agreement_check_date,
		   a.m02_is_check_agreement,
		   a.m02_trans_approve_disable,
		   a.m02_min_req_coverage_ratio,
		   a.m02_group_bp_enable,
		   a.m02_daily_withdrawal_limit,
		   a.m02_daily_withd_lmt_cur_cd_m03,
		   a.m02_daily_withd_lmt_cur_id_m03,
		   a.m02_status_id_v01,
		   status_list.v01_description
			   AS status_description,
		   status_list.v01_description_lang
			   AS status_description_lang,
		   a.m02_status_changed_by_id_u17,
		   u17_status_changed_by.u17_full_name
			   AS status_changed_by_full_name,
		   a.m02_status_changed_date,
		   a.m02_pwd_max_same_adj_chars,
		   a.m02_cust_pwd_max_same_adj_chrs,
		   a.m02_pwd_not_contain_login_name,
		   a.m02_cust_pwd_not_contain_lgn_n,
		   a.m02_cust_login_trading_pwd_dif,
		   a.m02_pwd_max_repeated_chars,
		   a.m02_cust_pwd_max_repeated_char,
		   a.m02_pwd_start_should_char,
		   a.m02_cust_pwd_start_should_char,
		   a.m02_maximum_password_length,
		   a.m02_cust_maximum_pwd_length,
		   a.m02_stmt_purge_period,
		   a.m02_primary_security_acc,
		   a.m02_secondary_security_acc,
		   a.m02_display_minus_buying_power,
		   a.m02_sec_comm_grp_allowed,
		   a.m02_enable_cash_due_cleared,
		   a.m02_due_settle_enabled,
		   a.m02_enable_hold_due_cleared,
		   a.m02_enable_pend_stl_utilize,
		   a.m02_display_unique_order,
		   a.m02_disable_portf_self_trade,
		   a.m02_disclaimer,
		   a.m02_disclaimer_ar,
		   a.m02_cust_detail_in_tmptbl_days,
		   a.m02_max_intl_backsearch_months,
		   a.m02_toll_free_number,
		   a.m02_apply_min_discount,
		   a.m02_report_logo_path,
		   a.m02_underage_to_minor_years,
		   a.m02_minor_to_major_years,
		   a.m02_vat_no,
		   a.m02_primary_institute_id_m02,
		   CASE WHEN a.m02_is_root_institution = 1 THEN 'Yes' ELSE 'No' END
			   AS is_root_institution,
		   a.m02_kyc_renewal_individual,
		   a.m02_kyc_renewal_corporate,
		   m150_primary_institute_id_m02,
		   m150_description,
		   m150_code,
		   m02_broker_id_m150,
		   m02_default_product_id_m152,
		   m02_price_type_for_margin,
		   m02_add_buy_pending_for_margin,
		   m02_add_pledge_for_bp
	FROM m02_institute a
		 LEFT JOIN u17_employee u17_created_by
			 ON a.m02_created_by_id_u17 = u17_created_by.u17_id
		 LEFT JOIN u17_employee u17_modified_by
			 ON a.m02_modified_by_id_u17 = u17_modified_by.u17_id
		 LEFT JOIN u17_employee u17_status_changed_by
			 ON a.m02_status_changed_by_id_u17 = u17_status_changed_by.u17_id
		 LEFT JOIN vw_status_list status_list
			 ON a.m02_status_id_v01 = status_list.v01_id
		 LEFT JOIN m150_broker m150 ON a.m02_broker_id_m150 = m150.m150_id
/